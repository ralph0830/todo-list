<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts - Nanum Gothic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Nanum Gothic', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        color: #1f2937;
        background: linear-gradient(135deg, #c7d2fe 0%, #e0e7ff 35%, #fce7f3 100%);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
      }
      
      /* 웹페이지와 동일한 배경 패턴 */
      .bg-pattern {
        background-image: url('data:image/svg+xml,%3Csvg width=%2220%22 height=%2220%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cdefs%3E%3Cpattern id=%22grid%22 width=%2220%22 height=%2220%22 patternUnits=%22userSpaceOnUse%22%3E%3Cpath d=%22M 20 0 L 0 0 0 20%22 fill=%22none%22 stroke=%22%23f1f5f9%22 stroke-width=%221%22 opacity=%220.3%22/%3E%3C/pattern%3E%3C/defs%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22url(%23grid)%22/%3E%3C/svg%3E');
        background-size: 20px 20px;
        opacity: 0.3;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }
      
      .container {
        max-width: 640px;
        margin: 0 auto;
      }
      
      /* 웹페이지와 동일한 헤더 */
      .header {
        position: relative;
        z-index: 10;
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(16px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-bottom: 1px solid rgba(156, 163, 175, 0.5);
        border-radius: 0 0 16px 16px;
        margin-bottom: 32px;
      }
      
      .header-content {
        max-width: 1024px;
        margin: 0 auto;
        padding: 0 24px;
      }
      
      .header-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 64px;
      }
      
      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
      }
      
      .logo-text h1 {
        margin: 0;
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      
      .logo-text p {
        margin: -4px 0 0 0;
        font-size: 12px;
        color: #6b7280;
      }
      
      .status-badge {
        display: flex;
        align-items: center;
        padding: 4px 10px;
        border-radius: 50px;
        font-size: 12px;
        font-weight: 500;
        background: #dcfce7;
        color: #166534;
      }
      
      /* 웹페이지와 동일한 진행률 바 */
      .progress-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border-radius: 24px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 16px;
        margin-bottom: 32px;
      }
      
      .progress-header {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 16px;
      }
      
      .progress-row-1 {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      
      .progress-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .progress-icon {
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      
      .progress-text {
        font-size: 14px;
        color: #374151;
      }
      
      .progress-text .label {
        font-weight: 600;
      }
      
      .progress-text .value {
        color: #4f46e5;
        font-weight: 700;
      }
      
      .progress-stats {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      
      .stat-item {
        display: flex;
        align-items: center;
        gap: 4px;
        white-space: nowrap;
      }
      
      .stat-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      
      .stat-dot.orange { background: #fb923c; }
      .stat-dot.green { background: #34d399; }
      
      .stat-text {
        color: #4b5563;
        font-size: 14px;
      }
      
      .progress-bar {
        width: 100%;
        background: #e5e7eb;
        border-radius: 50px;
        height: 8px;
        overflow: hidden;
      }
      
      .progress-fill {
        background: linear-gradient(90deg, #34d399 0%, #10b981 100%);
        height: 100%;
        border-radius: 50px;
        transition: width 0.5s ease-out;
      }
      
      /* 웹페이지와 동일한 할일 입력 폼 섹션 */
      .form-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border-radius: 24px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 24px;
        margin-bottom: 24px;
      }
      
      .form-input {
        width: 100%;
        padding: 12px 16px;
        font-size: 16px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        background: #f9fafb;
        margin-bottom: 16px;
        font-family: 'Nanum Gothic', sans-serif;
      }
      
      .recurring-options {
        margin-bottom: 16px;
      }
      
      .recurring-label {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 12px;
        display: block;
      }
      
      .recurring-buttons {
        display: flex;
        gap: 8px;
      }
      
      .recurring-btn {
        flex: 1;
        padding: 8px 16px;
        font-size: 14px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        background: white;
        text-align: center;
        transition: all 0.2s ease;
        cursor: pointer;
        text-decoration: none;
        color: #374151;
      }
      
      .recurring-btn.daily {
        border-color: #3b82f6;
        background: #dbeafe;
        color: #1e40af;
      }
      
      .recurring-btn.weekly {
        border-color: #10b981;
        background: #d1fae5;
        color: #065f46;
      }
      
      .recurring-btn.monthly {
        border-color: #8b5cf6;
        background: #e9d5ff;
        color: #6b21a8;
      }
      
      .recurring-btn-title {
        font-weight: 600;
      }
      
      .recurring-btn-desc {
        font-size: 12px;
        color: #6b7280;
      }
      
      .submit-btn {
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 16px;
        border: none;
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        transition: all 0.3s ease;
        cursor: pointer;
        float: right;
      }
      
      /* 웹페이지와 동일한 할일 섹션 */
      .tasks-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border-radius: 24px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 24px;
        margin-bottom: 24px;
      }
      
      .section-header {
        display: flex;
        align-items: center;
        margin-bottom: 24px;
      }
      
      .section-icon {
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 12px;
      }
      
      .section-icon.complete {
        background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
      }
      
      .section-title {
        font-size: 20px;
        font-weight: 700;
        color: #1f2937;
        flex: 1;
      }
      
      .task-count {
        background: #fed7aa;
        color: #ea580c;
        font-size: 14px;
        font-weight: 500;
        padding: 4px 12px;
        border-radius: 50px;
      }
      
      .task-count.complete {
        background: #bbf7d0;
        color: #059669;
      }
      
      .task-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      
      /* 웹페이지와 동일한 할일 항목 */
      .task-item {
        background: rgba(249, 250, 251, 0.8);
        border: 1px solid #f3f4f6;
        border-radius: 12px;
        padding: 16px;
        display: flex;
        align-items: center;
        gap: 16px;
        text-decoration: none;
        color: inherit;
        transition: all 0.2s ease;
      }
      
      .task-item:hover {
        background: white;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        transform: translateY(-1px);
      }
      
      .task-checkbox {
        width: 24px;
        height: 24px;
        background: white;
        border: 2px solid #d1d5db;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        transition: all 0.2s ease;
      }
      
      .task-checkbox.incomplete {
        border-color: #d1d5db;
      }
      
      .task-checkbox.complete {
        background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
        border-color: #10b981;
      }
      
      .task-checkbox svg {
        width: 16px;
        height: 16px;
        color: white;
      }
      
      .task-content {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      
      .task-text {
        font-size: 18px;
        font-weight: 500;
        color: #1f2937;
      }
      
      .task-text.complete {
        text-decoration: line-through;
        color: #9ca3af;
      }
      
      .task-meta {
        display: flex;
        align-items: center;
        gap: 8px;
        opacity: 0.6;
      }
      
      /* 웹페이지와 동일한 반복 배지 */
      .task-badge {
        font-size: 12px;
        font-weight: 500;
        padding: 2px 8px;
        border-radius: 8px;
        border: 1px solid;
      }
      
      .badge-daily {
        background: #dbeafe;
        color: #1d4ed8;
        border-color: #bfdbfe;
      }
      
      .badge-weekly {
        background: #d1fae5;
        color: #065f46;
        border-color: #a7f3d0;
      }
      
      .badge-monthly {
        background: #e9d5ff;
        color: #6b21a8;
        border-color: #c4b5fd;
      }
      
      .task-number {
        background: #f3f4f6;
        color: #6b7280;
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 50px;
      }
      
      .cta {
        text-align: center;
        margin: 32px 0;
      }
      
      .cta-button {
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        color: white;
        text-decoration: none;
        padding: 16px 32px;
        border-radius: 16px;
        font-weight: 600;
        font-size: 16px;
        display: inline-block;
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        transition: all 0.3s ease;
      }
      
      .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 35px rgba(99, 102, 241, 0.5);
      }
      
      .footer {
        background: rgba(248, 250, 252, 0.5);
        padding: 16px;
        text-align: center;
        border-top: 1px solid rgba(229, 231, 235, 0.5);
        color: #6b7280;
        font-size: 14px;
        border-radius: 0 0 24px 24px;
        margin-top: auto;
      }
      
      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #6b7280;
        font-style: italic;
      }
      
      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }
      
      @media (max-width: 640px) {
        body {
          padding: 10px;
        }
        
        .container {
          max-width: 100%;
        }
        
        .progress-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }
        
        .progress-stats {
          gap: 12px;
        }
        
        .recurring-buttons {
          flex-direction: column;
          gap: 8px;
        }
        
        .task-item {
          padding: 12px;
          gap: 12px;
        }
        
        .task-text {
          font-size: 16px;
        }
        
        .submit-btn {
          float: none;
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="bg-pattern"></div>
    <div class="container">
      <!-- Quick Access Link -->
      <div style="text-align: center; padding: 16px 0 24px 0;">
        <a href="https://todo.ralphpark.com" style="display: inline-block; background: black; color: white; text-decoration: none; padding: 12px 24px; border-radius: 50px; font-weight: 900; font-size: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); transition: all 0.2s ease; font-family: 'Nanum Gothic', sans-serif;">
          📱 TodoList로 바로가기
        </a>
      </div>
      <!-- Header - 웹페이지와 동일 -->
      <div class="header">
        <div class="header-content">
          <div class="header-inner">
            <div class="logo">
              <div class="logo-icon">
                <span style="color: white; font-size: 20px; font-weight: bold;">✓</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      
      <!-- Active Tasks - 웹페이지와 동일 -->
      <% if @incomplete_tasks.any? %>
        <div class="tasks-section">
          <div class="section-header">
            <h3 class="section-title">⏳ 진행중인 할 일 <%= @incomplete_tasks.count %>개</h3>
          </div>
          
          <div class="task-list">
            <% @incomplete_tasks.limit(10).each do |task| %>
              <div style="padding: 4px 0; font-size: 16px; color: #1f2937; font-family: 'Nanum Gothic', sans-serif;">
                <%= task.content %>
              </div>
            <% end %>
            <% if @incomplete_tasks.count > 10 %>
              <div class="empty-state">
                그 외 <%= @incomplete_tasks.count - 10 %>개의 할 일이 더 있습니다.
              </div>
            <% end %>
          </div>
        </div>
      <% else %>
        <div class="tasks-section">
          <div class="empty-state">
            <div class="empty-state-icon">🎉</div>
            <div>모든 할 일을 완료하셨습니다!<br>정말 대단해요!</div>
          </div>
        </div>
      <% end %>
      
      <!-- Completed Tasks (축약 버전) -->
      <% if @completed_tasks.any? %>
        <div class="tasks-section">
          <div class="section-header">
            <h3 class="section-title">✅ 완료한 일들 <%= @completed_tasks.count %>개</h3>
          </div>
          
          <div class="task-list">
            <% @completed_tasks.limit(3).each do |task| %>
              <div style="padding: 4px 0; font-size: 16px; color: #6b7280; text-decoration: line-through; font-family: 'Nanum Gothic', sans-serif;">
                <%= task.content %>
              </div>
            <% end %>
            <% if @completed_tasks.count > 3 %>
              <div class="empty-state">
                그 외 <%= @completed_tasks.count - 3 %>개의 완료된 할 일이 더 있습니다.
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
      
      <!-- CTA Button -->
      <div class="cta">
        <a href="https://todo.ralphpark.com" class="cta-button">
          TodoList에서 할 일 관리하기 →
        </a>
      </div>
      
      <!-- Footer -->
      <div class="footer">
        <p style="margin: 0 0 8px 0;">📧 <%= Time.current.strftime('%Y년 %m월 %d일 %H:%M') %> 발송</p>
        <p style="margin: 0;">© <%= Date.current.year %> TodoList - 더 나은 하루를 위해</p>
      </div>
    </div>
  </body>
</html>
